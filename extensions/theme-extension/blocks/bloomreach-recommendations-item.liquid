{% capture data_extra %}data-item-ids="{% if request.page_type == "product" %}{{ product.handle | escape }}{% else %}{{ block.settings.item_ids }}{% endif %}"{% endcapture %}
{% render "bloomreach-widget", data_extra: data_extra, widget_type: "item" %}
{% schema %}
  {
    "name": "t:recommendations.item.name",
    "target": "section",
    "javascript": "recommendations.js",
    "stylesheet": "recommendations.css",
    "settings": [
      {
        "type": "paragraph",
        "content": "t:recommendations.item.description"
      },
      {
        "id": "title",
        "type": "text",
        "label": "t:recommendations.title.label"
      },
      {
        "id": "widget_id",
        "type": "text",
        "label": "t:recommendations.widgetId.label"
      },
      {
        "type": "text",
        "id": "item_ids",
        "label": "t:recommendations.itemIds.label"
      },
      {
        "type": "checkbox",
        "id": "use_default",
        "label": "t:recommendations.useDefault.label",
        "default": true
      },
      {
        "id": "endpoint",
        "label": "t:recommendations.endpoint.label",
        "type": "select",
        "options": [
          {
            "label": "Staging",
            "value": "//pathways-staging.dxpapi.com/api/v2/widgets/"
          },
          {
            "label": "Production",
            "value": "//pathways.dxpapi.com/api/v2/widgets/"
          }
        ]
      },
      {
        "id": "fl_fields",
        "type": "text",
        "label": "t:recommendations.flFields.label",
        "default": "pid,price,sale_price,title,thumb_image,url"
      },
      {
        "type": "range",
        "id": "items_to_show",
        "label": "t:recommendations.itemsToShow.label",
        "default": 4,
        "min": 4,
        "max": 12,
        "step": 1
      },
      {
        "type": "range",
        "id": "items_to_fetch",
        "label": "t:recommendations.itemsToFetch.label",
        "default": 16,
        "min": 4,
        "max": 32,
        "step": 1
      },
      {
        "id": "custom_css",
        "label": "t:recommendations.customCss.label",
        "type": "textarea"
      },
      {
        "id": "additional_parameters",
        "label": "t:recommendations.additionalParameters.label",
        "type": "text",
        "info": "t:recommendations.additionalParameters.info",
        "placeholder": "name1=value1&name2=value2"
      }
    ]
  }
{% endschema %}
