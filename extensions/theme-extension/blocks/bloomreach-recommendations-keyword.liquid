{% render "bloomreach-config" %}
{% capture data_extra %}data-query="{% if request.page_type == "search" %}{{ search.terms | escape }}{% else %}{{ block.settings.query }}{% endif %}"{% endcapture %}
{% render "bloomreach-widget", data_extra: data_extra, widget_type: "keyword" %}
{% schema %}
  {
    "name": "t:recommendations.keyword.name",
    "target": "section",
    "javascript": "recommendations.js",
    "stylesheet": "recommendations.css",
    "settings": [
      {
        "type": "paragraph",
        "content": "t:recommendations.keyword.description"
      },
      {
        "id": "title",
        "type": "text",
        "label": "t:recommendations.title.label"
      },
      {
        "id": "widget_id",
        "type": "text",
        "label": "t:recommendations.widgetId.label"
      },
      {
        "id": "query",
        "type": "text",
        "label": "t:recommendations.query.label"
      },
      {
        "type": "range",
        "id": "items_to_show",
        "label": "t:recommendations.itemsToShow.label",
        "default": 4,
        "min": 4,
        "max": 12,
        "step": 1
      },
      {
        "type": "range",
        "id": "items_to_fetch",
        "label": "t:recommendations.itemsToFetch.label",
        "default": 16,
        "min": 4,
        "max": 32,
        "step": 1
      },
      {
        "id": "custom_css",
        "label": "t:recommendations.customCss.label",
        "type": "textarea"
      }
    ]
  }
{% endschema %}
